- url: 'https://api.github.com/repos/ros/ros_comm/issues/1697'
  title: Python Import Error from rospack
  body: "Hi peeps,\r\n\r\nI'm following along with the ROS tutorials ([Creating a Package](http://wiki.ros.org/ROS/Tutorials/CreatingPackage)) and when I run `rospack depends1 beginner_tutorials`\r\n\r\nI get this error\r\n```\r\ndev@dev-test-eth1:~/catkin_ws/src$ rospack depends1 beginner_tutorials\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/dist-packages/rosdep2/__init__.py\", line 40, in <module>\r\n    from .installers import InstallerContext, Installer, \\\r\n  File \"/usr/lib/python2.7/dist-packages/rosdep2/installers.py\", line 36, in <module>\r\n    from rospkg.os_detect import OsDetect\r\n  File \"/usr/lib/python2.7/dist-packages/rospkg/__init__.py\", line 41, in <module>\r\n    from .manifest import InvalidManifest, Manifest, parse_manifest_file\r\n  File \"/usr/lib/python2.7/dist-packages/rospkg/manifest.py\", line 40, in <module>\r\n    import xml.dom.minidom as dom\r\n  File \"/home/dev/miniconda2/lib/python2.7/xml/dom/minidom.py\", line 22, in <module>\r\n    from xml.dom.xmlbuilder import DOMImplementationLS, DocumentLS\r\n  File \"/home/dev/miniconda2/lib/python2.7/xml/dom/xmlbuilder.py\", line 3, in <module>\r\n    import copy\r\n  File \"/home/dev/miniconda2/lib/python2.7/copy.py\", line 52, in <module>\r\n    import weakref\r\n  File \"/home/dev/miniconda2/lib/python2.7/weakref.py\", line 14, in <module>\r\n    from _weakref import (\r\nImportError: cannot import name _remove_dead_weakref\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/dist-packages/rosdep2/__init__.py\", line 40, in <module>\r\n    from .installers import InstallerContext, Installer, \\\r\n  File \"/usr/lib/python2.7/dist-packages/rosdep2/installers.py\", line 36, in <module>\r\n    from rospkg.os_detect import OsDetect\r\n  File \"/usr/lib/python2.7/dist-packages/rospkg/__init__.py\", line 41, in <module>\r\n    from .manifest import InvalidManifest, Manifest, parse_manifest_file\r\n  File \"/usr/lib/python2.7/dist-packages/rospkg/manifest.py\", line 40, in <module>\r\n    import xml.dom.minidom as dom\r\n  File \"/home/dev/miniconda2/lib/python2.7/xml/dom/minidom.py\", line 22, in <module>\r\n    from xml.dom.xmlbuilder import DOMImplementationLS, DocumentLS\r\n  File \"/home/dev/miniconda2/lib/python2.7/xml/dom/xmlbuilder.py\", line 3, in <module>\r\n    import copy\r\n  File \"/home/dev/miniconda2/lib/python2.7/copy.py\", line 52, in <module>\r\n    import weakref\r\n  File \"/home/dev/miniconda2/lib/python2.7/weakref.py\", line 14, in <module>\r\n    from _weakref import (\r\nImportError: cannot import name _remove_dead_weakref\r\n[rospack] Error: could not find python module 'rosdep2.rospack'. is rosdep up-to-date (at least 0.10.4)?\r\n```\r\n\r\nI have a miniconda environment configured and I verified that rospack is indeed using the correct interpreter (Edited the /usr/lib/python2.7/dist-packages/rosdep2/__init__.py file to print sys.executable). I can import these modules \r\n\r\n```\r\ndev@dev-test-eth1:~/catkin_ws/src$ python\r\nPython 2.7.15 |Anaconda, Inc.| (default, Dec 14 2018, 19:04:19) \r\n[GCC 7.3.0] on linux2\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> from rosdep2 import rospack\r\n>>> import weakref\r\n>>> from _weakref import _remove_dead_weakref\r\n>>> \r\n```\r\n\r\nPython Interpreter\r\n```\r\ndev@dev-test-eth1:~/catkin_ws/src$ which python\r\n/home/dev/miniconda2/bin/python\r\n```\r\n\r\nPip \r\n```\r\ndev@dev-test-eth1:~/catkin_ws/src$ which pip\r\n/home/dev/miniconda2/bin/pip\r\n```\r\n\r\nLocated rosdep2\r\n```\r\ndev@dev-test-eth1:~/catkin_ws/src$ locate rosdep2\r\n/usr/lib/python2.7/dist-packages/rosdep2\r\n/usr/lib/python2.7/dist-packages/rosdep2/__init__.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/__init__.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/_version.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/_version.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/catkin_packages.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/catkin_packages.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/catkin_support.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/catkin_support.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/core.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/core.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/dependency_graph.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/dependency_graph.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/gbpdistro_support.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/gbpdistro_support.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/installers.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/installers.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/loader.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/loader.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/lookup.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/lookup.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/main.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/main.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/model.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/model.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms\r\n/usr/lib/python2.7/dist-packages/rosdep2/rep3.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/rep3.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/rosdistrohelper.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/rosdistrohelper.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/rospack.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/rospack.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/rospkg_loader.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/rospkg_loader.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/shell_utils.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/shell_utils.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/sources_list.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/sources_list.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/__init__.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/__init__.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/arch.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/arch.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/cygwin.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/cygwin.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/debian.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/debian.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/freebsd.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/freebsd.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/gem.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/gem.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/gentoo.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/gentoo.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/opensuse.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/opensuse.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/osx.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/osx.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/pip.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/pip.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/redhat.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/redhat.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/slackware.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/slackware.pyc\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/source.py\r\n/usr/lib/python2.7/dist-packages/rosdep2/platforms/source.pyc\r\n```\r\n\r\n\r\nPython Path\r\n```\r\ndev@dev-test-eth1:~/catkin_ws/src$ echo $PYTHONPATH \r\n/opt/ros/kinetic/lib/python2.7/dist-packages:/usr/lib/python2.7/dist-packages\r\n```\r\n\r\nSome additional info \r\n- Ubuntu 16.04\r\n- Kinetic ROS dist\r\n- miniconda2 py2.7\r\n\r\nI'm super confused, any ideas?\r\n"
  repo: 'https://api.github.com/repos/ros/ros_comm'
